<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naptár</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .calendar {
            width: 90%;
            max-width: 500px;
            border: 1px solid gray;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            background-color: rgb(114, 90, 39);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        button {
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid;
        }

        .weekdays, .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 10px;
        }

        .weekdays div, .days-grid div {
            padding: 10px;
            font-weight: bold;
            text-align: center;
        }

        .days-grid div {
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            border-radius: 4px;
        }

        .current-day {
            font-weight: bold;
            color: red;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 5px;
            max-width: 300px;
            width: 100%;
        }

        .close-btn {
            font-size: 20px;
            float: right;
        }

    </style>
</head>
<body>
    <div class="calendar">
        <header class="calendar-header">
            <button id="prev-month">Előző hónap</button>
            <h2 id="month-year">Január 2023</h2>
            <button id="next-month">Következő hónap</button>
        </header>
        
        <div class="weekdays">
            <div>H</div>
            <div>K</div>
            <div>Sze</div>
            <div>Cs</div>
            <div>P</div>
            <div>Szo</div>
            <div>V</div>
        </div>
        
        <div class="days-grid" id="days-grid"></div>
    </div>

    <div id="event-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>Esemény hozzáadása</h3>
            <form id="event-form">
                <input type="text" id="event-name" placeholder="Esemény neve" required>
                <input type="date" id="event-date" required>
                <button type="submit">Mentés</button>
            </form>
        </div>
    </div>

    <script>
        const daysGrid = document.getElementById("days-grid");
        const monthYear = document.getElementById("month-year");
        const prevMonthBtn = document.getElementById("prev-month");
        const nextMonthBtn = document.getElementById("next-month");
        const modal = document.getElementById("event-modal");
        const closeBtn = document.querySelector(".close-btn");
        const eventForm = document.getElementById("event-form");

        let date = new Date();

        function renderCalendar() {
            const year = date.getFullYear();
            const month = date.getMonth();
            monthYear.textContent = `${date.toLocaleString('hu', { month: 'long' })} ${year}`;
            
            daysGrid.innerHTML = "";

            const firstDay = new Date(year, month, 1).getDay();
            const lastDate = new Date(year, month + 1, 0).getDate();

            for (let i = 0; i < firstDay - 1; i++) {
                daysGrid.appendChild(document.createElement("div"));
            }
            for (let day = 1; day <= lastDate; day++) {
                const dayElement = document.createElement("div");
                dayElement.textContent = day;
                dayElement.addEventListener("click", openModal);
                if (day === new Date().getDate() && month === new Date().getMonth() && year === new Date().getFullYear()) {
                    dayElement.classList.add("current-day");
                }
                daysGrid.appendChild(dayElement);
            }
        }

        prevMonthBtn.addEventListener("click", () => {
            date.setMonth(date.getMonth() - 1);
            renderCalendar();
        });

        nextMonthBtn.addEventListener("click", () => {
            date.setMonth(date.getMonth() + 1);
            renderCalendar();
        });

        function openModal() {
            modal.style.display = "flex";
        }

        function closeModal() {
            modal.style.display = "none";
        }

        closeBtn.addEventListener("click", closeModal);
        window.addEventListener("click", (e) => {
            if (e.target == modal) closeModal();
        });

        eventForm.addEventListener("submit", function(event) {
            event.preventDefault();
            const eventName = document.getElementById("event-name").value;
            const eventDate = document.getElementById("event-date").value;

            const events = JSON.parse(localStorage.getItem("events")) || {};
            events[eventDate] = eventName;
            localStorage.setItem("events", JSON.stringify(events));

            closeModal();
            renderEvents();
        });

        function renderEvents() {
            const events = JSON.parse(localStorage.getItem("events")) || {};
            document.querySelectorAll(".days-grid div").forEach(day => {
                const dayDate = new Date(date.getFullYear(), date.getMonth(), day.textContent).toISOString().split('T')[0];
                if (events[dayDate]) {
                    day.classList.add("event");
                    day.title = events[dayDate];
                }
            });
        }
        renderCalendar();
        renderEvents();
    </script>
</body>
</html>